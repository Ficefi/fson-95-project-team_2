{"version":3,"file":"commonHelpers.js","sources":["../src/img/2x/desktop/fruitCart@2x.png","../src/js/modal_window.js","../src/js/renderFood.js","../src/js/fetchAPI.js","../src/js/footer.js"],"sourcesContent":["export default \"__VITE_ASSET__df46a7b6__\"","import { getProductById, sendSubscription } from './fetchAPI.js';\nimport { addToStorageCart, removeFromStorageCart, isExistInCart} from './localStorage.js';\nimport vegetables from \"../img/2x/desktop/fruitCart@2x.png\"\n\nconst modal = document.querySelector('.js-modal');\nconst content = document.querySelector('.modal-content');\nconst subsModal = document.querySelector('.js-modal-subscription');\nconst subscriptionModalContent = document.querySelector('.subscription-modal-content');\n\n////////////////ITEM MODAL ////////////////\n\nexport async function openModal(id) {\n\n  ////////MODAL SHOW////////\n  modal.classList.toggle('is-hidden');\n\n  //ADD MARKUP FOR MODAL WINDOW///////\n\n  await getProductById(id).then(response => {\n    const { img, name, desc, category, size, popularity, price } = response;\n\n    content.innerHTML = `<div class='image-wrap'>\n   <button class='modal-close-btn' data-modal-close aria-label='close modal button'>\n        <svg class='modal-window-close-button' width='15' height='15'>\n          <use href='./img/icons.svg#icon-close-btn'></use>\n        </svg>\n      </button>\n    <img src='${img}' alt='${desc}' class='modal-img'>\n    </div>\n    <div class='modal-descr-together'>\n    <div class='modal-descr-container'>\n    <h2 class='modal-name'>${name}</h2>\n    <div class='modal-text-wrapper'>\n    <p class='modal-text'>Category:<p class='modal-text-descr'>${String(category).replace('_', ' ')}</p>\n    <p class='modal-text'>Size:<p class='modal-text-descr'>${size}</p>\n    <p class='modal-text'>Popularity:<p class='modal-text-descr'>${popularity}</p>\n    </div>\n    </div>\n    <p class='modal-descr'>${desc}</p>\n    </div>\n    <div class='modal-floor-wrap'>\n    <p class='modal-price'>$${price}</p>\n    <button type='submit' class='modal-cart-btn'>Add to\n        <svg class='modal-window-cart-button' width='18' height='18'>\n          <use href='./img/icons.svg#icon-cart'></use>\n        </svg></button>\n    </div>\n\n  `;\n\n    ////////MODAL CLOSE LOGIC///////\n\n    window.addEventListener('keydown', handlePress);\n\n    function handlePress(e) {\n      if (e.key === 'Escape') {\n        modal.classList.add('is-hidden');\n      }\n    }\n\n    window.onclick = function(event) {\n      if (event.target === modal) {\n        modal.classList.add('is-hidden');\n      }\n    };\n\n    const closeBtn = document.querySelector('.modal-close-btn');\n    closeBtn.addEventListener('click', closeModal);\n    function closeModal(event) {\n      if (event.currentTarget === closeBtn) {\n        modal.classList.add('is-hidden');\n      }\n    }\n\n    /////////////////ADD TO CART LOGIC///////////////\n\n    const addToCart = document.querySelector('.modal-cart-btn');\n    addToCart.addEventListener('click', handleCart);\n\n\n    if (isExistInCart(id)) {\n        addToCart.childNodes[0].data = \"Remove from\"\n        addToCart.style.minWidth = '175px';\n    }\n\n\n    function handleCart(e) {\n      if (isExistInCart(id)) {\n        removeFromStorageCart(id)\n        addToCart.childNodes[0].data = \"Add to\"\n        addToCart.style.minWidth = '130px';\n      }\n      else {\n\n        addToStorageCart(id)\n        addToCart.childNodes[0].data = \"Remove from\"\n        addToCart.style.minWidth = '175px';\n      }\n    }\n\n  if (modal.classList.contains(\"is-hidden\")) {\n    removeEventListener('click', closeModal);\n    removeEventListener('click', handleCart);\n    removeEventListener('keydown', handlePress);\n  }\n  });\n}\n\n\n////////////////SUBSCRIPTION MODAL ////////////////\n\nexport async function subscriptionModal(email) {\n\n  ////////MODAL SHOW////////\n  subsModal.classList.toggle('is-hidden');\n\n\n\n  ///////////IS EMAIL EXIST? LOGIC///////////\n\n  await sendSubscription(email).then(response => {\n    subscriptionModalContent.innerHTML = `<div class='success-text-wrap'>\n   <button class='modal-close-btn' data-modal-close aria-label='close modal button'>\n        <svg class='modal-window-close-button' width='15' height='15'>\n          <use href='./img/icons.svg#icon-close-btn'></use>\n        </svg>\n      </button>\n      <h2 class='subscription-success-header'>Thanks for subscribing for <span class='subscription-success-email'>new</span> products</h2>\n      <p class='subscription-success-descr'>We promise you organic and high-quality products that will meet your expectations. Please stay with us and we promise you many pleasant surprises.</p>\n      <img src=\"${vegetables}\" alt='vegetables' class='subscription-success-image'>\n  `\n  }).catch(error => {\n    if (error.response.status === 409) {\n      //////EMAIL ALREADY SUBSCRIBED\n      subscriptionModalContent.innerHTML = `<div class='text-wrap'>\n   <button class='modal-close-btn' data-modal-close aria-label='close modal button'>\n        <svg class='modal-window-close-button' width='15' height='15'>\n          <use href='./img/icons.svg#icon-close-btn'></use>\n        </svg>\n      </button>\n      <h2 class='subscription-failed-header'>This <span class='subscription-failed-email'>email address</span> has already been entered</h2>\n      <p class='subscription-failed-descr'>You have already subscribed to our new products. Watch for offers at the mailing address.</p>\n  `\n    } else {\n      console.log(\"SOMETHING WENT WRONG\");\n    }\n\n  });\n\n\n    ////////MODAL CLOSE LOGIC///////\n\n    window.addEventListener('keydown', handlePress);\n\n    function handlePress(e) {\n      if (e.key === 'Escape') {\n        subsModal.classList.add('is-hidden');\n      }\n    }\n\n    window.onclick = function(event) {\n      if (event.target === subsModal) {\n        subsModal.classList.add('is-hidden');\n      }\n    };\n\n    const closeBtn = document.querySelector('.modal-close-btn');\n    closeBtn.addEventListener('click', closeModal);\n    function closeModal(event) {\n      if (event.currentTarget === closeBtn) {\n        subsModal.classList.add('is-hidden');\n      }\n    }\n\n\n\n}\n","import { getProducts, getCategoriesProducts } from './fetchAPI';\nimport { openModal } from './modal_window';\n\nconst list = document.querySelector('.list-product');\n\nconst formSearch = document.querySelector('.form-search');\nconst errors = document.querySelector('.error');\nconst selected = document.querySelector('#selected');\n\nerrors.style.display = 'none';\n\nexport let keywords;\nexport let selectedForm;\n\nformSearch.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const { search } = event.currentTarget.elements;\n  keywords = search.value;\n\n  localStorage.setItem('SaveFilters', JSON.stringify(keywords) || null);\n  //    localStorage.setItem(\"savetext\", key.keywords);\n  //    console.log(searchForm)\n  renderFood();\n  // console.log(keys)\n  console.log(keywords);\n}\n\nformSearch.elements.search.value = localStorage.getItem('savetext');\n\nrenderFood();\n\nselected.addEventListener('change', handleChange);\n\nfunction handleChange(event) {\n  const select = event.target.value;\n  const selecteds = event.target.value;\n  selectedForm = selecteds;\n  console.log(selected.value);\n  selectedForm = selecteds;\n  localStorage.setItem('SaveCategpries', JSON.stringify(selectedForm) || null);\n  //    localStorage.setItem(\"saveselected\", categories.selectedForm);\n  //    console.log(categories.selectedForm)\n  console.log(select);\n  console.log(selectedForm);\n  renderFood();\n}\n\nformSearch.elements.selecteds.value = localStorage.getItem('saveselected');\n\nfunction renderCategory() {\n  // const category = null;\n  getCategoriesProducts()\n    .then(data => {\n      const category = data\n        .map(data => {\n          return `<option value=\"${data}\">${data}</option>`;\n        })\n        .join('');\n      selected.insertAdjacentHTML('beforeend', category);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nrenderCategory();\n\nfunction renderFood() {\n  getProducts()\n    .then(foodImages => {\n      if (foodImages.results.length === 0) {\n        errors.style.display = 'flex';\n      }\n      createMarkup(foodImages.results);\n    })\n    .catch(error => {\n      throw new Error(error);\n    });\n}\n\nfunction createMarkup(array) {\n  const markup = array\n    .map(({ name, img, category, price, size, popularity, is10PercentOff }) => {\n      if (is10PercentOff == true) {\n        return `\n              <li class=\"item-product\">\n                <div class=\"product-container\" id=\"svg-discount\">\n                  <svg width=\"60\" height=\"60\" class=\"discount-svg\">\n                    <use href=\"../img/icons.svg#icon-discount\"></use>\n                  </svg>\n                  </div>\n                  <img class=\"img-product\" src=\"${img}\" width=\"400\" height=\"200\">\n                  <h2 class=\"caption-product\">${name}</h2>\n                  <div class=\"features-container\">\n                      <p class=\"feature\">Category: <span class=feature-black>${category}</span></p>\n                      <p class=\"feature\">Size: <span class=feature-black>${size}</span></p>\n                      <p class=\"feature popularity\">Popularity: <span class=feature-black>${popularity}</span></p>\n                  </div>\n                  <div class=\"sell-container\">\n                      <p class=\"price-product\">$${price}</p>\n                      <div class=\"svg-container\">\n                          <svg class=\"svg\" width=\"18\" height=\"18\">\n                          <use href=\"./img/icons.svg#icon-cart\"></use>\n                          </svg>\n                      </div>\n                  </div>\n                </div>\n              </li>\n              `;\n      } else {\n        return `\n              <li class=\"item-product\" id=\"item\">\n                <div class=\"product-container\" id=\"svg-discount\">\n                  <img class=\"img-product\" src=\"${img}\" width=\"400\" height=\"200\">\n                  <h2 class=\"caption-product\">${name}</h2>\n                  <div class=\"features-container\">\n                      <p class=\"feature\">Category: <span class=feature-black>${String(\n                        category\n                      ).replace('_', ' ')}</span></p>\n                      <p class=\"feature\">Size: <span class=feature-black>${size}</span></p>\n                      <p class=\"feature popularity\">Popularity: <span class=feature-black>${popularity}</span></p>\n                  </div>\n                  <div class=\"sell-container\">\n                      <p class=\"price-product\">$${price}</p>\n                      <div class=\"svg-container\">\n                          <svg class=\"svg\" width=\"18\" height=\"18\">\n                          <use href=\"./img/icons.svg#icon-cart\"></use>\n                          </svg>\n                      </div>\n                  </div>\n                </div>\n              </li>\n              `;\n      }\n    })\n    .join('');\n  list.innerHTML = '';\n  list.insertAdjacentHTML('beforeend', markup);\n}\n\nexport { createMarkup };\n\n","import axios from 'axios';\nimport { keywords, selectedForm } from './renderFood';\n\nexport async function getProducts() {\n  let page = 1;\n  let limit = 6;\n  const response = await axios.get(\n    `https://food-boutique.b.goit.study/api/products?keyword=${keywords || \"\"}&category=${selectedForm || \"\"}&`, {\n      params: {\n      page,\n      limit,\n    },\n  }\n  )\n  localStorage.setItem(\"page\", (page))\n  localStorage.getItem(\"page\")\n  localStorage.setItem(\"limit\", (limit))\n  localStorage.getItem(\"limit\")\n  return response.data;\n}\n\nasync function getAllProducts(page) {\n  const response = await axios.get(\n    `https://food-boutique.b.goit.study/api/products/?page=${page}`,\n  );\n  return response.data;\n}\n\nasync function getPopularProducts() {\n  const response = await axios.get(\n    'https://food-boutique.b.goit.study/api/products/popular',\n  );\n  return response.data;\n}\n\nasync function getDiscountProducts() {\n  const response = await axios.get(\n    'https://food-boutique.b.goit.study/api/products/discount',\n  );\n  return response.data;\n}\n\nasync function getCategoriesProducts() {\n  const response = await axios.get(\n    'https://food-boutique.b.goit.study/api/products/categories',\n  );\n  return response.data;\n}\n\nasync function getProductById(id) {\n  const response = await axios.get(\n    `https://food-boutique.b.goit.study/api/products/${id}`,\n  );\n  return response.data;\n}\n\nasync function createNewOrder(email, productList) {\n\n  try {\n    const apiUrl = 'https://food-boutique.b.goit.study/api/orders';\n    const requestBody = {\n      email: email,\n      products: productList,\n    };\n    const response = await axios.post(apiUrl, requestBody);\n      return response.data;\n\n  } catch (e) {\n    console.log(\"Something went wrong:\" + \" \" + e)\n    throw e;\n  }\n}\n\nasync function sendSubscription(email){\n\n  try {\n\n  const apiUrl = 'https://food-boutique.b.goit.study/api/subscription'\n  const requestBody = { email: email }\n\n  const response = await axios.post(apiUrl, requestBody)\n  return response.data\n  } catch(e) {\n    console.log(\"Something went wrong:\" + \" \" + e)\n    throw e;\n  }\n\n}\n\nexport { getAllProducts, getCategoriesProducts, getDiscountProducts,\n  getPopularProducts, getProductById, createNewOrder, sendSubscription };\n\n","import { subscriptionModal } from \"./modal_window\";\n\nconst registerForm = document.querySelector(\".footer-form-authorization\");\n\nregisterForm.addEventListener(\"submit\", handleSubmit);\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n    \n    subscriptionModal(registerForm[0].value);\n\n    registerForm.reset();\n}\n"],"names":["vegetables","subsModal","subscriptionModalContent","subscriptionModal","email","sendSubscription","response","error","handlePress","e","event","closeBtn","closeModal","list","formSearch","errors","selected","keywords","selectedForm","handleSubmit","search","renderFood","handleChange","select","selecteds","renderCategory","getCategoriesProducts","data","category","getProducts","foodImages","createMarkup","array","markup","name","img","price","size","popularity","is10PercentOff","page","limit","axios","apiUrl","requestBody","registerForm"],"mappings":"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"}