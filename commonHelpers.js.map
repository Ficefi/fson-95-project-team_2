{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart.js"],"sourcesContent":["import { getProductById } from './fetchAPI.js';\nimport { addToStorageCart, removeFromStorageCart } from './localStorage.js';\n\n\nconst selectors = {\n  cart: document.querySelector('.cart'),\n  basket_items: document.querySelector('.basket-items'),\n  number_of_products: document.querySelector('.number-of-products'),\n  total_price: document.querySelector('.total-price'),\n};\n\n// function displayCart() {\n//   let j = 0;\n//   document.getElementById(\n//     'card-counter'\n//   ).innerHTML = `<img class=\"basket-img\" src = \"../img/yellow-basket.png\" width = \"164px\" height = \"140px\" alt = \"Yellow shopping basket\" >\n// \t\t<h2 class=\"basket-title\">\n// \t\t\tYour basket is <span class=\"accent-txt\">empty...</span>\n// \t\t</h2>\n// \t\t<p class=\"basket-txt\">Go to the main page to select your favorite products and add them to the cart.</p>\n// `;\n// }\n\nconst cart = JSON.parse(localStorage.getItem('cart')) || [];\n\n//////////////// IF SOMETHING IN CART HIDE BASKET IMAGE///////////////\n\nif (cart.length > 0) {\n  selectors.cart.style.display = 'none';\n}\n\n///////////////NUMBER OF PRODUCTS IN CART///////////\nlet numberOfProducts = cart.length;\n\nselectors.number_of_products.textContent = String(numberOfProducts);\n\n//////////////TOTAL PRODUCTS PRICE//////////////////\nlet totalPrice = 0;\n\n///////////////ADD ONE ITEM BY ID///////////////\nasync function addItem(id) {\n  let itemPrice;\n  await getProductById(id).then(response => {\n    const { name, category, size, price, img, desc, _id } = response;\n    itemPrice = price;\n    const markup = `<li class='basket-item' data-id=\"${_id}\">\n  <button class='remove-item' data-modal-close aria-label='close modal button'>\n        <svg class='remove-item-image' width='15' height='15'>\n          <use href='./img/icons.svg#icon-close-btn'></use>\n        </svg>\n      </button>\n     <img class='product-img' src=\"${img}\" alt=\"${desc}\">\n     <div class='prod-items-wrap'>\n     <h2 class='product-name'>${name}</h2>\n\t\t <div class='prod-desc'>\n     <p class='prod-value'><span class='product-category'>Category:&nbsp;</span>${category.replace(\n       '_',\n       ' '\n     )}</p>\n     <p class='prod-value'><span class='product-category'>Size:&nbsp;</span> ${size}</p>\n     </div>\n\t\t <p class='prod-price'>$${price}</p>\n     </div>\n     </li> <hr>\n     `;\n\n    selectors.basket_items.insertAdjacentHTML('beforeend', markup);\n  });\n  return itemPrice;\n}\n\nasync function addAllItem() {\n  for (const item of cart) {\n    if (!item) {\n    } else {\n      await addItem(item).then(price => (totalPrice += price));\n    }\n  }\n}\n\nselectors.total_price.textContent = '$' + totalPrice.toFixed(2);\n\naddAllItem();\n\nselectors.basket_items.addEventListener('click', handleRemove);\n\nfunction handleRemove(e) {\n  e.preventDefault();\n\n  if (e.target.className !== 'remove-item') {\n    return;\n  }\n  const item = e.target.closest('.basket-item');\n  selectors.basket_items.removeChild(item);\n  removeFromStorageCart(item.dataset.id);\n}\n\n////////////DELETE ALL BUTTON LOGIC///////////\n\nfunction deleteAllFromBasket() {\n  localStorage.removeItem('cart');\n  selectors.cart.style.display = 'block';\n}\n"],"names":["selectors","cart","numberOfProducts","totalPrice","addItem","id","itemPrice","getProductById","response","name","category","size","price","img","desc","_id","markup","addAllItem","item","handleRemove","removeFromStorageCart"],"mappings":"6FAIA,MAAMA,EAAY,CAChB,KAAM,SAAS,cAAc,OAAO,EACpC,aAAc,SAAS,cAAc,eAAe,EACpD,mBAAoB,SAAS,cAAc,qBAAqB,EAChE,YAAa,SAAS,cAAc,cAAc,CACpD,EAcMC,EAAO,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,GAAK,GAIrDA,EAAK,OAAS,IAChBD,EAAU,KAAK,MAAM,QAAU,QAIjC,IAAIE,EAAmBD,EAAK,OAE5BD,EAAU,mBAAmB,YAAc,OAAOE,CAAgB,EAGlE,IAAIC,EAAa,EAGjB,eAAeC,EAAQC,EAAI,CACzB,IAAIC,EACJ,aAAMC,EAAeF,CAAE,EAAE,KAAKG,GAAY,CACxC,KAAM,CAAE,KAAAC,EAAM,SAAAC,EAAU,KAAAC,EAAM,MAAAC,EAAO,IAAAC,EAAK,KAAAC,EAAM,IAAAC,CAAK,EAAGP,EACxDF,EAAYM,EACZ,MAAMI,EAAS,oCAAoCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAMlBF,WAAaC;AAAA;AAAA,gCAElBL;AAAA;AAAA,kFAEkDC,EAAS,QACpF,IACA,GACP;AAAA,+EAC+EC;AAAA;AAAA,4BAEnDC;AAAA;AAAA;AAAA,OAKxBZ,EAAU,aAAa,mBAAmB,YAAagB,CAAM,CACjE,CAAG,EACMV,CACT,CAEA,eAAeW,GAAa,CAC1B,UAAWC,KAAQjB,EACZiB,GAEH,MAAMd,EAAQc,CAAI,EAAE,KAAKN,GAAUT,GAAcS,CAAM,CAG7D,CAEAZ,EAAU,YAAY,YAAc,IAAMG,EAAW,QAAQ,CAAC,EAE9Dc,IAEAjB,EAAU,aAAa,iBAAiB,QAASmB,CAAY,EAE7D,SAASA,EAAa,EAAG,CAGvB,GAFA,EAAE,eAAc,EAEZ,EAAE,OAAO,YAAc,cACzB,OAEF,MAAMD,EAAO,EAAE,OAAO,QAAQ,cAAc,EAC5ClB,EAAU,aAAa,YAAYkB,CAAI,EACvCE,EAAsBF,EAAK,QAAQ,EAAE,CACvC"}